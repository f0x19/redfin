{% extends 'base.html' %}
{% block title %}Listings - OpenHomes{% endblock %}
{% block content %}
<section class="filters">
  <form id="filtersForm">
    <input type="text" name="q" placeholder="Search" value="{{ request.args.get('q','') }}"/>
    <input type="text" name="city" placeholder="City" value="{{ request.args.get('city','') }}"/>
    <input type="text" name="state" placeholder="State" value="{{ request.args.get('state','') }}"/>
    <input type="number" name="min_price" placeholder="Min Price" value="{{ request.args.get('min_price','') }}"/>
    <input type="number" name="max_price" placeholder="Max Price" value="{{ request.args.get('max_price','') }}"/>
    <input type="number" name="min_beds" placeholder="Min Beds" value="{{ request.args.get('min_beds','') }}"/>
    <input type="number" name="min_baths" step="0.5" placeholder="Min Baths" value="{{ request.args.get('min_baths','') }}"/>
    <select name="property_type">
      <option value="">Any type</option>
      {% for t in ['house','condo','townhouse','multi-family','land'] %}
      <option value="{{t}}" {% if request.args.get('property_type')==t %}selected{% endif %}>{{t.title()}}</option>
      {% endfor %}
    </select>
    <select name="sort">
      <option value="new" {% if request.args.get('sort','new')=='new' %}selected{% endif %}>Newest</option>
      <option value="price_asc" {% if request.args.get('sort')=='price_asc' %}selected{% endif %}>Price: Low to High</option>
      <option value="price_desc" {% if request.args.get('sort')=='price_desc' %}selected{% endif %}>Price: High to Low</option>
    </select>
    <button type="submit">Apply</button>
  </form>
</section>
<section>
  <div id="results" class="grid"></div>
  <div class="pagination">
    <button id="prevPage">Prev</button>
    <span id="pageInfo"></span>
    <button id="nextPage">Next</button>
  </div>
</section>
<script>
  window.__INITIAL_QUERY__ = {{ request.query_string|tojson|safe }};
</script>
{% endblock %}
